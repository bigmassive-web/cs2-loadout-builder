<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS2 Skin Comparison</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0a0a, #1a1a2e, #001122);
            color: #ff6600;
            min-height: 100vh;
            padding-top: 80px;
        }

        .top-nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(15px);
            border-bottom: 2px solid rgba(0, 191, 255, 0.3);
            z-index: 1000;
            padding: 15px 0;
            box-shadow: 0 5px 20px rgba(0, 191, 255, 0.2);
        }

        .nav-content {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .nav-logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #ffffff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .nav-menu {
            display: flex;
            gap: 15px;
        }

        .nav-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            color: white;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .nav-btn:hover {
            background: rgba(0, 191, 255, 0.2);
            border-color: rgba(0, 191, 255, 0.5);
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background: linear-gradient(45deg, #9500ff, #00bfff);
            border-color: transparent;
        }

        .main-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 200px 1fr 200px;
            gap: 30px;
        }

        .ad-space {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            height: 800px;
            position: sticky;
            top: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .header {
            grid-column: 1 / -1;
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 0;
            background: linear-gradient(90deg, #9500ff, #00bfff);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 191, 255, 0.3);
        }

        .header h1 {
            font-size: 3rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            margin-bottom: 10px;
            color: white;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            color: white;
        }

        .comparison-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .skin-selectors {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .skin-selector-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease;
        }

        .skin-selector-card:hover {
            transform: translateY(-2px);
        }

        .skin-selector-card h3 {
            color: #ffffff;
            font-size: 1.3rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(0, 191, 255, 0.3);
            text-align: center;
        }

        .skin-search-container {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            align-items: center;
        }

        .skin-search {
            flex: 1;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 14px;
        }

        .skin-search::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .weapon-filter {
            min-width: 150px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 14px;
        }

        .weapon-filter option {
            background: #0a0a0a;
            color: white;
        }

        .skin-results {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 20px;
        }

        .skin-results::-webkit-scrollbar {
            width: 6px;
        }

        .skin-results::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        .skin-results::-webkit-scrollbar-thumb {
            background: rgba(0, 191, 255, 0.5);
            border-radius: 3px;
        }

        .skin-option {
            padding: 12px;
            margin: 8px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .skin-option:hover {
            background: rgba(0, 191, 255, 0.1);
            border-left-color: #00bfff;
            transform: translateX(5px);
        }

        .skin-option.selected {
            background: rgba(0, 191, 255, 0.2);
            border-left-color: #00bfff;
        }

        .skin-option img {
            width: 80px;
            height: 50px;
            object-fit: contain;
            border-radius: 6px;
            background: rgba(0, 0, 0, 0.3);
        }

        .skin-option-info {
            flex: 1;
        }

        .skin-option-name {
            font-weight: bold;
            color: #ffffff;
            margin-bottom: 3px;
            font-size: 0.9rem;
        }

        .skin-option-weapon {
            font-size: 0.8rem;
            opacity: 0.8;
            color: rgba(255, 255, 255, 0.7);
        }

        .skin-option-rarity {
            font-size: 0.8rem;
            font-weight: bold;
            margin-top: 2px;
        }

        .comparison-display {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .comparison-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            min-height: 500px;
            display: flex;
            flex-direction: column;
        }

        .comparison-item h4 {
            color: #ffffff;
            font-size: 1.2rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(0, 191, 255, 0.3);
        }

        .comparison-image {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-height: 250px;
            position: relative;
            overflow: hidden;
        }

        .comparison-image img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .comparison-image img:hover {
            transform: scale(1.05);
            filter: brightness(1.2);
        }

        .comparison-image::after {
            content: 'üîó Click to buy on TradeIt.gg';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(45deg, rgba(255, 165, 0, 0.9), rgba(255, 140, 0, 0.9));
            color: #000;
            padding: 8px 15px;
            font-size: 0.8rem;
            font-weight: bold;
            text-align: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            border-radius: 0 0 10px 10px;
        }

        .comparison-image:hover::after {
            opacity: 1;
        }

        .comparison-placeholder {
            color: rgba(255, 255, 255, 0.6);
            font-size: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
        }

        .comparison-placeholder .placeholder-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        .comparison-info {
            margin-top: 15px;
            padding: 15px;
            background: rgba(0, 191, 255, 0.1);
            border-radius: 8px;
            border-left: 4px solid #00bfff;
        }

        .comparison-info h5 {
            color: #ffffff;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .comparison-info p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .comparison-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-label {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1rem;
            color: #ffffff;
            font-weight: bold;
        }

        .affiliate-banner {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.8), rgba(20, 20, 40, 0.9));
            border-radius: 15px;
            padding: 20px 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            height: 100%;
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(10px);
            overflow: hidden;
        }

        .tradeit-banner {
            border: 2px solid rgba(255, 165, 0, 0.3);
            background: linear-gradient(135deg, rgba(255, 165, 0, 0.1), rgba(255, 140, 0, 0.05));
        }

        .banner-header h3 {
            font-size: 1.2rem;
            margin-bottom: 4px;
            color: #ffffff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            flex-shrink: 0;
        }

        .banner-subtitle {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.8rem;
            margin-bottom: 8px;
            flex-shrink: 0;
        }

        .bonus-highlights {
            margin: 20px 0;
        }

        .bonus-item {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
            padding: 15px;
            background: rgba(255, 165, 0, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(255, 165, 0, 0.2);
        }

        .bonus-icon {
            font-size: 2rem;
            width: 50px;
            text-align: center;
        }

        .bonus-text {
            flex: 1;
            text-align: left;
        }

        .bonus-text strong {
            display: block;
            color: #ffffff;
            font-size: 1rem;
            margin-bottom: 3px;
        }

        .bonus-amount {
            font-size: 1.3rem;
            font-weight: bold;
            color: #ffa500;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .banner-cta {
            display: inline-block;
            padding: 8px 14px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            font-size: 0.75rem;
            margin: 8px 0;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .tradeit-cta {
            background: linear-gradient(45deg, #ffa500, #ff8c00);
            color: #000000;
            box-shadow: 0 4px 15px rgba(255, 165, 0, 0.3);
        }

        .tradeit-cta:hover {
            background: linear-gradient(45deg, #ff8c00, #ffa500);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 165, 0, 0.4);
        }

        .banner-features {
            font-size: 0.65rem;
            line-height: 1.3;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 6px;
            text-align: center;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top: 3px solid #00bfff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        .api-status {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            border-left: 4px solid #00bfff;
        }

        .api-status.loading {
            border-left-color: #ffa500;
        }

        .api-status.error {
            border-left-color: #ff6b6b;
        }

        .api-status.success {
            border-left-color: #51cf66;
        }

        .footer {
            background: linear-gradient(135deg, #0a0a0a, #001122);
            border-top: 2px solid rgba(0, 191, 255, 0.3);
            margin-top: 60px;
            padding: 40px 0 20px;
            color: #ffffff;
        }

        .footer-content {
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }

        .footer-section h4 {
            color: #ffffff;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 8px;
        }

        .footer-section ul li a {
            color: #cccccc;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-section ul li a:hover {
            color: #00bfff;
        }

        .footer-section p {
            color: #cccccc;
            line-height: 1.6;
        }

        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 30px;
            padding-top: 20px;
            text-align: center;
            color: #888888;
        }

        .footer-bottom a {
            color: #00bfff;
            text-decoration: none;
        }

        .footer-bottom a:hover {
            color: #ffffff;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }

        @media (max-width: 1200px) {
            .main-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .ad-space {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 15px;
            }
            
            .skin-selectors {
                grid-template-columns: 1fr;
            }
            
            .comparison-display {
                grid-template-columns: 1fr;
            }
            
            .skin-search-container {
                flex-direction: column;
            }
            
            .header h1 {
                font-size: 2rem;
            }

            .comparison-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Top Navigation Bar -->
    <div class="top-nav">
        <div class="nav-content">
            <div class="nav-logo">CS Loadouts</div>
            <div class="nav-menu">
                <a href="https://bigmassive-web.github.io/cs2-loadout-builder/" class="nav-btn">
                    üî´ Loadout Builder
                </a>
                <a href="https://bigmassive-web.github.io/cs2-loadout-builder/price-game.html" class="nav-btn">
                    üí∞ Price Game
                </a>
                <a href="https://bigmassive-web.github.io/cs2-loadout-builder/price-guessing.html" class="nav-btn">
                    üéØ Price Guessing
                </a>
                <a href="#" class="nav-btn active">
                    ‚öñÔ∏è Skin Comparison
                </a>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>Not affiliated with Valve Corporation or Counter-Strike. All game assets are property of their respective owners.</p>
            <p class="affiliate-disclosure">
                As affiliates of TradeIt.gg and SkinSwap, we may earn commissions from qualifying purchases made through our links.
            </p>
        </div>
    </footer>

    <script>
        // Global variables
        let allSkins = [];
        let filteredSkins1 = [];
        let filteredSkins2 = [];
        let selectedSkin1 = null;
        let selectedSkin2 = null;

        // ByMykel CS2 API endpoints
        const BYMYKEL_API_ENDPOINTS = [
            'https://bymykel.github.io/CSGO-API/api/en/skins.json',
            'https://raw.githubusercontent.com/ByMykel/CSGO-API/main/public/api/en/skins.json',
            'https://bymykel.github.io/CSGO-API/api/en/skins_not_grouped.json',
            'https://raw.githubusercontent.com/ByMykel/CSGO-API/main/public/api/en/skins_not_grouped.json'
        ];

        // Initialize the application
        async function initializeApp() {
            try {
                updateApiStatus('loading', 'Loading CS2 skins from ByMykel API...', 'Connecting to GitHub repository');
                
                await loadSkinsFromByMykelAPI();
                
                if (allSkins.length > 0) {
                    updateApiStatus('success', 'Successfully loaded CS2 skins!', `Loaded ${allSkins.length} skins from ByMykel API`);
                    populateWeaponFilters();
                    displaySkins('skinResults1', allSkins.slice(0, 100));
                    displaySkins('skinResults2', allSkins.slice(0, 100));
                    filteredSkins1 = allSkins;
                    filteredSkins2 = allSkins;
                    setupEventListeners();
                    showNotification('CS2 Skin Comparison loaded successfully!', 'success');
                } else {
                    throw new Error('No skins loaded from ByMykel API');
                }
                
            } catch (error) {
                console.error('Failed to load from ByMykel API:', error);
                updateApiStatus('error', 'ByMykel API temporarily unavailable', 'Please try again later or check your internet connection');
                showAPIError();
            }
        }

        // Load skins from ByMykel CS2 API
        async function loadSkinsFromByMykelAPI() {
            console.log('üîÑ Loading CS2 skins from ByMykel API...');
            
            for (let i = 0; i < BYMYKEL_API_ENDPOINTS.length; i++) {
                const endpoint = BYMYKEL_API_ENDPOINTS[i];
                console.log(`üì° Trying endpoint ${i + 1}: ${endpoint}`);
                
                try {
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 15000); // 15 second timeout
                    
                    const response = await fetch(endpoint, {
                        signal: controller.signal,
                        headers: {
                            'Accept': 'application/json',
                            'Cache-Control': 'no-cache'
                        }
                    });
                    
                    clearTimeout(timeoutId);
                    
                    console.log(`üìä Endpoint ${i + 1} response: ${response.status} ${response.statusText}`);
                    
                    if (response.ok) {
                        const data = await response.json();
                        console.log('üì¶ Raw data structure:', Object.keys(data));
                        
                        if (Array.isArray(data) && data.length > 0) {
                            allSkins = processSkinsData(data);
                            console.log(`‚úÖ SUCCESS! Loaded ${allSkins.length} skins from ByMykel API (endpoint ${i + 1})`);
                            return;
                        } else if (data && typeof data === 'object') {
                            // Handle grouped data structure
                            const skinsArray = Object.values(data).flat();
                            if (skinsArray.length > 0) {
                                allSkins = processSkinsData(skinsArray);
                                console.log(`‚úÖ SUCCESS! Loaded ${allSkins.length} skins from grouped data (endpoint ${i + 1})`);
                                return;
                            }
                        }
                        
                        console.log(`‚ö†Ô∏è Endpoint ${i + 1} returned empty or invalid data`);
                    }
                } catch (error) {
                    console.log(`‚ùå Endpoint ${i + 1} failed:`, error.message);
                    updateApiStatus('loading', 'Retrying connection...', `Trying endpoint ${i + 2}/${BYMYKEL_API_ENDPOINTS.length}`);
                }
            }
            
            throw new Error('All ByMykel API endpoints failed');
        }

        // Process skins data from ByMykel API
        function processSkinsData(data) {
            console.log(`üîß Processing ${data.length} raw skin entries...`);
            
            const processedSkins = data.map((skin, index) => {
                // Handle different data structures from ByMykel API
                const skinName = skin.name || skin.market_hash_name || `Unknown Skin ${index}`;
                const weaponName = skin.weapon?.name || extractWeaponFromName(skinName);
                const rarityName = skin.rarity?.name || skin.rarity || 'Unknown';
                const rarityColor = skin.rarity?.color || getRarityColorByName(rarityName);
                const collectionName = skin.crates?.[0]?.name || skin.collection?.name || 'Unknown Collection';
                const imageUrl = skin.image || generatePlaceholderImage();
                
                return {
                    id: skin.id || `bymykel_${index}`,
                    name: skinName,
                    weapon: weaponName,
                    rarity: rarityName,
                    rarityColor: rarityColor,
                    collection: collectionName,
                    image: imageUrl,
                    category: determineCategory(weaponName),
                    // Additional ByMykel API data
                    pattern: skin.pattern || null,
                    minFloat: skin.min_float || null,
                    maxFloat: skin.max_float || null,
                    souvenir: skin.souvenir || false,
                    stattrak: skin.stattrak || false
                };
            }).filter(skin => skin.weapon !== 'Unknown' && skin.name !== 'Unknown Skin'); // Filter out invalid entries
            
            console.log(`‚úÖ Processed ${processedSkins.length} valid skins`);
            
            // Log some sample data for debugging
            if (processedSkins.length > 0) {
                console.log('üìÑ Sample processed skin:', processedSkins[0]);
                console.log('üî´ Available weapons:', [...new Set(processedSkins.map(s => s.weapon))].slice(0, 10));
                console.log('üé® Available rarities:', [...new Set(processedSkins.map(s => s.rarity))]);
            }
            
            return processedSkins;
        }

        // Extract weapon name from full skin name
        function extractWeaponFromName(fullName) {
            const parts = fullName.split(' | ');
            const weaponPart = parts[0] || '';
            
            // Handle special cases
            if (weaponPart.includes('‚òÖ')) {
                return weaponPart.replace('‚òÖ ', '').trim();
            }
            
            return weaponPart.trim() || 'Unknown';
        }

        // Get rarity color by name
        function getRarityColorByName(rarityName) {
            const colors = {
                'Consumer Grade': '#b0c3d9',
                'Industrial Grade': '#5e98d9',
                'Mil-Spec Grade': '#4b69ff',
                'Restricted': '#8847ff',
                'Classified': '#d32ce6',
                'Covert': '#eb4b4b',
                'Contraband': '#e4ae39',
                'Extraordinary': '#ffd700'
            };
            
            // Try exact match first
            if (colors[rarityName]) return colors[rarityName];
            
            // Try partial matches
            for (const [key, color] of Object.entries(colors)) {
                if (rarityName.toLowerCase().includes(key.toLowerCase().split(' ')[0])) {
                    return color;
                }
            }
            
            return '#ffffff'; // Default white
        }

        // Determine weapon category
        function determineCategory(weapon) {
            const categories = {
                rifles: ['AK-47', 'M4A4', 'M4A1-S', 'AWP', 'SSG 08', 'AUG', 'SG 553', 'FAMAS', 'Galil AR', 'SCAR-20', 'G3SG1'],
                pistols: ['Glock-18', 'USP-S', 'P2000', 'Desert Eagle', 'P250', 'Tec-9', 'Five-SeveN', 'CZ75-Auto', 'R8 Revolver', 'Dual Berettas'],
                smgs: ['MP7', 'MP9', 'MP5-SD', 'UMP-45', 'P90', 'PP-Bizon', 'MAC-10'],
                knives: ['Karambit', 'M9 Bayonet', 'Bayonet', 'Flip Knife', 'Gut Knife', 'Falchion Knife', 'Bowie Knife', 'Butterfly Knife', 'Huntsman Knife', 'Shadow Daggers', 'Ursus Knife', 'Navaja Knife', 'Stiletto Knife', 'Talon Knife', 'Classic Knife', 'Paracord Knife', 'Survival Knife', 'Nomad Knife', 'Skeleton Knife'],
                gloves: ['Sport Gloves', 'Driver Gloves', 'Hand Wraps', 'Moto Gloves', 'Specialist Gloves', 'Bloodhound Gloves', 'Broken Fang Gloves', 'Hydra Gloves']
            };
            
            for (const [category, weapons] of Object.entries(categories)) {
                if (weapons.some(w => weapon.includes(w))) {
                    return category;
                }
            }
            
            return 'other';
        }

        // Generate placeholder image
        function generatePlaceholderImage() {
            return 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA4MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjMzMzIi8+Cjx0ZXh0IHg9IjQwIiB5PSIyNSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwIiBmaWxsPSIjOTk5IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5DUzIgU2tpbjwvdGV4dD4KPC9zdmc+';
        }

        // Update API status display
        function updateApiStatus(status, title, message) {
            const statusElement = document.getElementById('apiStatus');
            statusElement.className = `api-status ${status}`;
            
            let icon = '';
            switch(status) {
                case 'loading': icon = '<div class="loading-spinner"></div>'; break;
                case 'success': icon = '‚úÖ'; break;
                case 'error': icon = '‚ö†Ô∏è'; break;
            }
            
            statusElement.innerHTML = `
                ${icon}
                <strong>${title}</strong>
                <p>${message}</p>
            `;
        }

        // Show API error state
        function showAPIError() {
            document.getElementById('skinResults1').innerHTML = `
                <div style="text-align: center; color: #ff6b6b; padding: 40px;">
                    <h4>ByMykel API Unavailable</h4>
                    <p>Unable to load CS2 skin data. Please check your internet connection and try refreshing the page.</p>
                    <button onclick="location.reload()" style="margin-top: 15px; padding: 10px 20px; background: #00bfff; border: none; border-radius: 5px; color: white; cursor: pointer;">
                        üîÑ Retry
                    </button>
                </div>
            `;
            
            document.getElementById('skinResults2').innerHTML = `
                <div style="text-align: center; color: #ff6b6b; padding: 40px;">
                    <h4>ByMykel API Unavailable</h4>
                    <p>Unable to load CS2 skin data. Please check your internet connection and try refreshing the page.</p>
                    <button onclick="location.reload()" style="margin-top: 15px; padding: 10px 20px; background: #00bfff; border: none; border-radius: 5px; color: white; cursor: pointer;">
                        üîÑ Retry
                    </button>
                </div>
            `;
        }

        // Populate weapon filter dropdowns
        function populateWeaponFilters() {
            const filter1 = document.getElementById('weaponFilter1');
            const filter2 = document.getElementById('weaponFilter2');
            
            const uniqueWeapons = [...new Set(allSkins.map(skin => skin.weapon))].sort();
            
            // Clear existing options except first
            filter1.innerHTML = '<option value="">All Weapons</option>';
            filter2.innerHTML = '<option value="">All Weapons</option>';
            
            uniqueWeapons.forEach(weapon => {
                if (weapon && weapon !== 'Unknown') {
                    const option1 = document.createElement('option');
                    option1.value = weapon;
                    option1.textContent = weapon;
                    filter1.appendChild(option1);
                    
                    const option2 = document.createElement('option');
                    option2.value = weapon;
                    option2.textContent = weapon;
                    filter2.appendChild(option2);
                }
            });
            
            console.log(`üéõÔ∏è Populated filters with ${uniqueWeapons.length} unique weapons`);
        }

        // Display skins in results container
        function displaySkins(containerId, skins) {
            const container = document.getElementById(containerId);
            
            if (skins.length === 0) {
                container.innerHTML = '<div style="text-align: center; color: rgba(255, 255, 255, 0.7); padding: 40px;">No skins found matching your criteria</div>';
                return;
            }

            let html = '';
            const skinsToShow = skins.slice(0, 100); // Limit for performance
            
            skinsToShow.forEach(skin => {
                const rarityColor = skin.rarityColor || getRarityColorByName(skin.rarity);
                html += `
                    <div class="skin-option" onclick="selectSkin('${containerId}', '${skin.id}')">
                        <img src="${skin.image}" alt="${skin.name}" 
                             onerror="this.src='${generatePlaceholderImage()}'" />
                        <div class="skin-option-info">
                            <div class="skin-option-name">${skin.name}</div>
                            <div class="skin-option-weapon">${skin.weapon}</div>
                            <div class="skin-option-rarity" style="color: ${rarityColor};">${skin.rarity}</div>
                        </div>
                    </div>
                `;
            });
            
            if (skins.length > 100) {
                html += `<div style="text-align: center; padding: 15px; color: rgba(255, 255, 255, 0.7); font-style: italic;">Showing first 100 of ${skins.length} skins. Use search to narrow results.</div>`;
            }
            
            container.innerHTML = html;
        }

        // Select a skin for comparison
        function selectSkin(containerId, skinId) {
            const skin = allSkins.find(s => s.id === skinId);
            if (!skin) return;

            const isFirstSelector = containerId === 'skinResults1';
            const comparisonId = isFirstSelector ? 'comparison1' : 'comparison2';
            const infoId = isFirstSelector ? 'info1' : 'info2';
            
            // Store selected skin
            if (isFirstSelector) {
                selectedSkin1 = skin;
            } else {
                selectedSkin2 = skin;
            }

            // Update visual selection
            document.querySelectorAll(`#${containerId} .skin-option`).forEach(option => {
                option.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');

            // Update comparison display
            updateComparisonDisplay(comparisonId, infoId, skin);
            
            showNotification(`Selected: ${skin.name}`, 'success');
        }

        // Update comparison display
        function updateComparisonDisplay(comparisonId, infoId, skin) {
            const comparisonDiv = document.getElementById(comparisonId);
            const infoDiv = document.getElementById(infoId);
            
            // Update image
            comparisonDiv.innerHTML = `<img src="${skin.image}" alt="${skin.name}" onclick="openAffiliateLink('${skin.name}')" onerror="this.src='${generatePlaceholderImage()}'" />`;
            
            // Update info
            const rarityColor = skin.rarityColor || getRarityColorByName(skin.rarity);
            const number = infoId.slice(-1);
            
            document.getElementById(`skinName${number}`).textContent = skin.name;
            document.getElementById(`weaponName${number}`).textContent = `Weapon: ${skin.weapon}`;
            document.getElementById(`rarityName${number}`).textContent = `Rarity: ${skin.rarity}`;
            document.getElementById(`rarity${number}`).textContent = skin.rarity;
            document.getElementById(`rarity${number}`).style.color = rarityColor;
            document.getElementById(`collection${number}`).textContent = skin.collection;
            
            infoDiv.style.display = 'block';
        }

        // Filter skins based on search and weapon filter
        function filterSkins(selectorNumber) {
            const searchInput = document.getElementById(`search${selectorNumber}`);
            const weaponFilter = document.getElementById(`weaponFilter${selectorNumber}`);
            const resultsContainer = `skinResults${selectorNumber}`;
            
            const searchTerm = searchInput.value.toLowerCase();
            const selectedWeapon = weaponFilter.value;
            
            let filtered = allSkins.filter(skin => {
                const matchesSearch = skin.name.toLowerCase().includes(searchTerm) || 
                                    skin.weapon.toLowerCase().includes(searchTerm) ||
                                    (skin.collection && skin.collection.toLowerCase().includes(searchTerm));
                const matchesWeapon = !selectedWeapon || skin.weapon === selectedWeapon;
                
                return matchesSearch && matchesWeapon;
            });
            
            if (selectorNumber === 1) {
                filteredSkins1 = filtered;
            } else {
                filteredSkins2 = filtered;
            }
            
            displaySkins(resultsContainer, filtered);
        }

        // Setup event listeners
        function setupEventListeners() {
            // Search inputs
            document.getElementById('search1').addEventListener('input', () => filterSkins(1));
            document.getElementById('search2').addEventListener('input', () => filterSkins(2));
            
            // Weapon filters
            document.getElementById('weaponFilter1').addEventListener('change', () => filterSkins(1));
            document.getElementById('weaponFilter2').addEventListener('change', () => filterSkins(2));
        }

        // Open affiliate link
        function openAffiliateLink(skinName = '') {
            const affiliateUrl = 'https://tradeit.gg/?aff=csloadout';
            window.open(affiliateUrl, '_blank');
            showNotification(`Opening TradeIt.gg to find "${skinName}" - Happy trading! üéÆ`, 'success');
        }

        // Show notification
        function showNotification(message, type) {
            const notification = document.createElement('div');
            const bgColor = type === 'success' ? 'linear-gradient(45deg, #28a745, #20c997)' : 
                            type === 'warning' ? 'linear-gradient(45deg, #ffc107, #fd7e14)' :
                            'linear-gradient(45deg, #dc3545, #e74c3c)';
            
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 25px;
                border-radius: 8px;
                color: white;
                font-weight: bold;
                z-index: 10000;
                animation: slideIn 0.3s ease;
                background: ${bgColor};
                box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            `;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Add animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
        </div>
    </div>

    <div class="main-container">
        <div class="header">
            <h1>‚öñÔ∏è CS2 Skin Comparison</h1>
            <p>Compare CS2 skins using ByMykel API data</p>
        </div>

        <!-- Left Ad Space -->
        <div class="ad-space">
            <div class="affiliate-banner tradeit-banner">
                <div class="banner-header">
                    <h3>üîÑ TradeIt.gg</h3>
                    <p class="banner-subtitle">Trade CS2 Skins Instantly</p>
                </div>
                
                <div class="bonus-highlights">
                    <div class="bonus-item">
                        <div class="bonus-icon">üéÅ</div>
                        <div class="bonus-text">
                            <strong>First Trade Bonus</strong>
                            <span class="bonus-amount">$5.00</span>
                        </div>
                    </div>
                    
                    <div class="bonus-item">
                        <div class="bonus-icon">üí∞</div>
                        <div class="bonus-text">
                            <strong>Topup Bonus</strong>
                            <span class="bonus-amount">35%</span>
                        </div>
                    </div>
                </div>
                
                <a href="https://tradeit.gg/?aff=csloadout" target="_blank" class="banner-cta tradeit-cta">
                    Start Trading Now
                </a>
                
                <p class="banner-features">
                    ‚ú® Instant trades<br>
                    ‚ú® 1000+ skins available<br>
                    ‚ú® Secure & trusted
                </p>
            </div>
        </div>

        <div class="comparison-container">
            <!-- API Status -->
            <div class="api-status loading" id="apiStatus">
                <div class="loading-spinner"></div>
                <strong>Loading CS2 skins from ByMykel API...</strong>
                <p>Fetching latest skin data from GitHub repository</p>
            </div>

            <div class="skin-selectors">
                <div class="skin-selector-card">
                    <h3>üîç Select First Skin</h3>
                    <div class="skin-search-container">
                        <input type="text" class="skin-search" id="search1" placeholder="Search skins...">
                        <select class="weapon-filter" id="weaponFilter1">
                            <option value="">All Weapons</option>
                        </select>
                    </div>
                    <div class="skin-results" id="skinResults1">
                        <div class="loading-spinner"></div>
                    </div>
                </div>

                <div class="skin-selector-card">
                    <h3>üîç Select Second Skin</h3>
                    <div class="skin-search-container">
                        <input type="text" class="skin-search" id="search2" placeholder="Search skins...">
                        <select class="weapon-filter" id="weaponFilter2">
                            <option value="">All Weapons</option>
                        </select>
                    </div>
                    <div class="skin-results" id="skinResults2">
                        <div class="loading-spinner"></div>
                    </div>
                </div>
            </div>

            <div class="comparison-display">
                <div class="comparison-item">
                    <h4>First Skin</h4>
                    <div class="comparison-image" id="comparison1">
                        <div class="comparison-placeholder">
                            <div class="placeholder-icon">üé®</div>
                            <div>Select a skin above to compare</div>
                        </div>
                    </div>
                    <div class="comparison-info" id="info1" style="display: none;">
                        <h5 id="skinName1">Skin Name</h5>
                        <p id="weaponName1">Weapon: -</p>
                        <p id="rarityName1">Rarity: -</p>
                        <div class="comparison-stats">
                            <div class="stat-item">
                                <div class="stat-label">Rarity</div>
                                <div class="stat-value" id="rarity1">-</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Collection</div>
                                <div class="stat-value" id="collection1">-</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="comparison-item">
                    <h4>Second Skin</h4>
                    <div class="comparison-image" id="comparison2">
                        <div class="comparison-placeholder">
                            <div class="placeholder-icon">üé®</div>
                            <div>Select a skin above to compare</div>
                        </div>
                    </div>
                    <div class="comparison-info" id="info2" style="display: none;">
                        <h5 id="skinName2">Skin Name</h5>
                        <p id="weaponName2">Weapon: -</p>
                        <p id="rarityName2">Rarity: -</p>
                        <div class="comparison-stats">
                            <div class="stat-item">
                                <div class="stat-label">Rarity</div>
                                <div class="stat-value" id="rarity2">-</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Collection</div>
                                <div class="stat-value" id="collection2">-</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Ad Space -->
        <div class="ad-space">
            <div class="affiliate-banner tradeit-banner">
                <div class="banner-header">
                    <h3>üíé SkinSwap</h3>
                    <p class="banner-subtitle">Premium CS2 Marketplace</p>
                </div>
                
                <div class="bonus-highlights">
                    <div class="bonus-item">
                        <div class="bonus-icon">üöÄ</div>
                        <div class="bonus-text">
                            <strong>Premium Skins</strong>
                            <span class="bonus-amount">Verified</span>
                        </div>
                    </div>
                    
                    <div class="bonus-item">
                        <div class="bonus-icon">üîí</div>
                        <div class="bonus-text">
                            <strong>Secure Trading</strong>
                            <span class="bonus-amount">100%</span>
                        </div>
                    </div>
                </div>
                
                <a href="https://skinswap.com/r/csloadout" target="_blank" class="banner-cta tradeit-cta">
                    Browse Premium Skins
                </a>
                
                <p class="banner-features">
                    ‚ú® Verified sellers<br>
                    ‚ú® Rare collections<br>
                    ‚ú® Instant delivery
                </p>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>CS Loadouts</h4>
                <p>The ultimate destination for Counter-Strike 2 loadout creation and customization. Build your perfect weapon configurations and share them with the community.</p>
            </div>
            
            <div class="footer-section">
                <h4>Available Tools</h4>
                <ul>
                    <li><a href="https://bigmassive-web.github.io/cs2-loadout-builder/">Loadout Builder</a></li>
                    <li><a href="https://bigmassive-web.github.io/cs2-loadout-builder/price-game.html">Price Game</a></li>
                    <li><a href="https://bigmassive-web.github.io/cs2-loadout-builder/price-guessing.html">Price Guessing</a></li>
                    <li><a href="#">Skin Comparison</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h4>Coming Soon</h4>
                <ul>
                    <li>Skin Calculator</li>
                    <li>Trade Tracker</li>
                    <li>CS2 News Feed</li>
                    <li>Weapon Guides</li>
                    <li>Market Trends Analysis</li>
                    <li>Pro Player Loadouts</li>
                    <li>Skin Database</li>
                </ul>
                <p style="color: #ffffff; font-weight: bold; margin-top: 15px;">More exciting features in development!</p>
            </div>
